<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="theme-color" content="#fafafa" />
    <title>Manual Cultura en Vena</title>
    <meta name="description" content="" />
    <link rel="apple-touch-icon" href="/assets/img/icon.png" />
    <link rel="icon" type="image/svg+xml" href="/assets/img/favicon.png" />
</head>

<body>
    <div class="layout">


        <aside class="sidebar">
            <header class="header">
                <div class="header_holder">
                    <div class="header_brand">
                        <a href="/"><img src="/assets/img/logo blanco.png" alt=""></a>
                    </div>
                    <div class="social">
                        <div class="instagram">
                            <a href="https://www.instagram.com/culturaenvena/" class="fa fa-instagram"></a>
                        </div>
                        <div class="facebook">
                            <a href="https://www.facebook.com/culturaenvena/" class="fa fa-facebook"></a>
                        </div>
                        <div class="twitter">
                            <a href="https://twitter.com/CulturaEnVena_" class="fa fa-twitter"></a>
                        </div>
                    </div>
                </div>
            </header>
            <nav>
                <div class="menu_group">
                    <ul class="menu">
                        <li class="menu_item">
                            <div class="menu_item_heading">
                                <a href="/">Introducción</a>
                            </div>
                        </li>
                        <li class="menu_item">
                            <div class="menu_item_heading ">
                                <a href="/pages/conceptualizacion.html">Conceptualización</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="menu_group">
                    <h5 class="menu_tagline">Elementos del sistema</h5>
                    <ul class="menu">
                        <li class="menu_item">
                            <div class="menu_item_heading">
                                <a href="/pages/forma.html">Forma</a>
                            </div>
                        </li>
                        <li class="menu_item">
                            <div class="menu_item_heading">
                                <p>Color</p>
                                <span class="fa fa-chevron-down"></span>
                            </div>
                            <div class="menu_item_submenu">
                                <ul class="submenu">
                                    <li class="submenu_item"><a href="/pages/color.html">Sistema de color</a></li>
                                    <li class="submenu_item"><a href="/pages/color_2.html">Uso del color</a></li>
                                </ul>
                            </div>
                        </li>
                        <li class="menu_item">
                            <div class="menu_item_heading">
                                <a href="/pages/tipografia.html">Tipografía</a>
                            </div>
                        </li>

                        <li class="menu_item">
                            <div class="menu_item_heading">
                                <a href="/pages/reticula.html">Retícula y composición</a>
                            </div>
                        </li>

                        <li class="menu_item">
                            <div class="menu_item_heading">
                                <p>Animaciones y transiciones</p>
                                <span class="fa fa-chevron-down"></span>
                            </div>
                            <div class="menu_item_submenu">
                                <ul class="submenu">
                                    <li class="submenu_item"><a href="/pages/animacion.html">Animación de la marca</a>
                                    </li>
                                    <li class="submenu_item"><a href="/pages/transicion.html">Transiciones</a></li>
                                </ul>
                            </div>
                        </li>

                        <li class="menu_item">
                            <div class="menu_item_heading">
                                <a href="/pages/fotografia.html">Fotografía</a>
                            </div>
                        </li>

                        <li class="menu_item">
                            <div class="menu_item_heading active">
                                <a href="/pages/musica.html">Música</a>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="menu_group">
                    <h5 class="menu_tagline">Aplicaciones</h5>
                    <ul class="menu">

                        <li class="menu_item">
                            <div class="menu_item_heading">
                                <p>Piezas audiovisuales</p>
                                <span class="fa fa-chevron-down"></span>
                            </div>
                            <div class="menu_item_submenu">
                                <ul class="submenu">
                                    <li class="submenu_item"><a href="/pages/rotulacion.html">Rotulación</a></li>
                                    <li class="submenu_item"><a href="/pages/bumper.html">Bumpers</a></li>
                                    <li class="submenu_item"><a href="/pages/mes.html">Este mes en Cultura en Vena</a>
                                    </li>
                                </ul>
                            </div>

                        </li>

                        <li class="menu_item">
                            <div class="menu_item_heading">
                                <a href="/pages/carteleria.html">Cartelería</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <main class="player">
            <section class="intro" style="background-color: white; z-index: 4;">
                <h1>Música</h1>
                <p>Para la música de las piezas se ha partido de la playlist que tiene creada Cultura en Vena en Spotify
                    para la exposición <span style="font-style: italic; font-weight: normal;">¿Goya en un hospital?
                    </span>
                    También se han incluido otras piezas musicales del mismo género y estilo.</p>
            </section>
            <section>
                <div id="musiclist"></div>
                <div id="playercontroller">
                    <div style="display: table; width: 100%; margin-bottom: 20px;">
                        <div style="display: table-row; font-size: 10px;">
                            <div style="display: table-cell; text-align: left;" id="currentsecond">0.0</div>
                            <div style="display: table-cell;" id="currenttitle">Selecciona una canción</div>
                            <div style="display: table-cell; text-align: right;" id="currentduration">0.0</div>
                        </div>
                    </div>
                    <input type="range" min="1" max="100" value="0" class="music_slider" style="width: 100%"
                        onchange="rangechanged()" id="playerrange">
                    <br>
                    <br>
                    <div style="display: table; width: 100%">
                        <div style="display: table-row;">
                            <div style="display: table-cell; vertical-align: middle; font-size: 30px;"
                                onclick="playprevmusic()"><i class="fa fa-backward"></i></div>
                            <div style="display: table-cell; vertical-align: middle; font-size: 50px;" id="playpause"
                                onclick="playpause()"><i class="fa fa-play"></i></div>
                            <div style="display: table-cell; vertical-align: middle; font-size: 30px;"
                                onclick="playnextmusic()"><i class="fa fa-forward"></i></div>
                        </div>
                    </div>
                </div>
            </section>

        </main>



        <footer class="footer">
            <div class="logo">
                <img src="/assets/img/favicon.png" alt="">
                <p>Cultura en Vena</p>
            </div>
            <p class="team">Anastasiya Blonska, Silvia Carmena García-Bermejo, Marta Feijoo Domínguez & Alicia Garvín
                Moreno</p>
        </footer>
    </div>
    <script>
        var currentaudioindex = 0
        var audios = [
            { title: "Canción de los vendimiadores", file: "cancion-de-los-vendimiadores" },
            { title: "Close to home", file: "close-to-home" },
            { title: "Cuarteto en Fa mayor (L.183): III. Finale. Allegro non molto", file: "cuarteto-fa-mayor" },
            { title: "Cuentos de la juventud viniendo de la fuente", file: "cuentos-de-la-juventud" },
            { title: "Duetto buffo di due gatti", file: "duetto-buffo-di-due-gatti" },
            { title: "Fuente y caudal (Remastered 2014)", file: "fuente-caudal" },
            { title: "El pelele", file: "el-pelele" },
            { title: "Die Jahreszeiten - Hob. XXI:3 / 1. Spring - Be propitious", file: "haydn-die-jahreszeiten" },
            { title: "L'arbore de Diana", file: "larbore-di-diana" },
            { title: "Los payos del Malbru (arr. E. Moreno): Siempre que a Madril vamos", file: "los-payos" },
            { title: "Quintetto in Do Maggiore La Musica Notturna Delle Strade Di Madrid Op. 30, No. 6, G. 324: Passa", file: "quintetto-in-do-maggiore" },
            { title: "Sol", file: "sol" },
            { title: "Trio for piano, clarinet and viola in E flat major, K. 498, Kegelstatt-Trio: III. Allegretto", file: "trio-clarinet" },
            { title: "Una cosa rara: Atto secondo, No.18 Su, su, cacciatori - Compatite, o gran Regina - Viva, viva", file: "cosa-rara" },
            { title: "Animals (cover)", file: "animals" },




        ]

        function listmusics() {
            for (var i = 0; i < audios.length; i++) {
                $("#musiclist").append("<div class='musicitem' onclick=playmusic(" + i + ")><i class='fa fa-music' style='width: 30px;'></i> " + audios[i].title + "</div>")
            }
        }

        function seekbarloop() {
            if (isplaying) {
                var currentscond = sound.seek()
                $("#playerrange").val(currentscond / sound.duration())
                if (!isNaN(sound.seek() / 60))
                    $("#currentsecond").html((sound.seek() / 60).toFixed(2))
                $("#currentduration").html((sound.duration() / 60).toFixed(2))
                $("#currenttitle").html(audios[currentaudioindex].title)
                setTimeout(function () {
                    seekbarloop()
                }, 1000)
            }
        }

        listmusics()

        var sound

        function playmusic(currentindex) {

            currentaudioindex = currentindex
            try {
                sound.stop()
            }
            catch (e) {
            }
            sound = new Howl({
                src: ['../assets/music/' + audios[currentindex].file + '.mp3']
            });
            var nextmusic = currentaudioindex + 1
            sound.on('end', function () {
                if (nextmusic <= audios.length)
                    $(".musicitem:eq(" + nextmusic + ")").click()
                else
                    stop()
            });

            $(".musicitem").css({ "background-color": "inherit", "font-family": "'Gotham Book'"})
            $(".musicitem:eq(" + currentaudioindex + ")").css({ "background-color": "white", "font-family": "'Gotham Medium'" })

            play()
        }

        function playprevmusic() {
            if (currentaudioindex > 0)
                playmusic(currentaudioindex - 1)
        }

        function playnextmusic() {
            if (currentaudioindex < audios.length)
                playmusic(currentaudioindex + 1)
        }

        function setmusicbynum(num) {
            try {
                sound.stop()
            }
            catch (e) {
            }
            sound = new Howl({
                src: ['mp3/' + audios[num].file + '.mp3']
            });
        }

        setmusicbynum(0)

        var isplaying = false

        function play() {
            isplaying = true
            sound.play()
            $("#playpause").html('<i class="fa fa-pause"></i>')
            seekbarloop()
        }

        function pause() {
            isplaying = false
            sound.pause()
            $("#playpause").html('<i class="fa fa-play"></i>')
        }

        function stop() {
            sound.stop()
            isplaying = false
            $("#playpause").html('<i class="fa fa-play"></i>')
        }

        function playpause() {
            $(".musicitem").css({ "background-color": "inherit", "font-family": "'Gotham Book'"})
            $(".musicitem:eq(" + currentaudioindex + ")").css({ "background-color": "white", "font-family": "'Gotham Medium'" })
            if (isplaying)
                pause()
            else
                play()
        }


        $('.musicitem').click(function () {
            //
        });

        function rangechanged() {
            var seekvalue = $("#playerrange").val()
            var wantedsecond = sound.duration() * (seekvalue / 100)
            sound.seek(wantedsecond)
        }
    </script>
    <script type="module" src="/app/main.js"></script>
</body>

</html>